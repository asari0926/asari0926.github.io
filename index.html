<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ゲーム</title>
</head>
<body>

<!-- ホーム画面 -->
<div id="home-screen">
    <h1>ホーム</h1>
    <p>コイン: <span id="coin-count">10</span></p>
    <p>レベル: <span id="player-number">5</span></p>
    <button onclick="goToFightScreen()">戦う</button>
    <button onclick="goToShopScreen()">ショップ</button>
    <button onclick="goToQuestScreen()">クエスト</button>
</div>

<!-- 戦闘画面 -->
<div id="fight-screen" style="display:none;">
    <h1>戦う</h1>
    <p>敵のレベルを選んでください</p>
    <button onclick="selectEnemy(1)">レベル1</button>
    <button onclick="selectEnemy(10)">レベル10</button>
    <button onclick="selectEnemy(100)">レベル100</button>
    <button onclick="fight()">戦闘開始！</button>
    <p id="message"></p>
    <button onclick="goHome()">ホームに戻る</button>
</div>

<!-- ショップ画面 -->
<div id="shop-screen" style="display:none;">
    <h1>ショップ</h1>
    <p>コイン: <span id="coin-count">10</span></p>
    <p>レベル: <span id="player-number">5</span></p>
    <button id="shop-upgrade-1-10" class="shop-choice">レベル+1 (コイン10)</button>
    <button id="shop-upgrade-10-100" class="shop-choice">レベル+10 (コイン100)</button>
    <p id="shop-message"></p>
    <button onclick="goHome()">ホームに戻る</button>
</div>

<!-- クエスト画面 -->
<div id="quest-screen" style="display:none;">
    <h1>クエスト</h1>
    <p>難易度C: 敵を1体倒せ（以上1）、コインを5枚集めろ（以上5）、レベルを10に上げろ（以上10）</p>
    <button onclick="completeQuest('C')">完了</button>
    <p>難易度B: 100レベルの敵を1体倒せ（以上1）</p>
    <button onclick="completeQuest('B')">完了</button>
    <p>難易度A: 1000以上の敵を倒せ（以上1）</p>
    <button onclick="completeQuest('A')">完了</button>
    <p>難易度S: 5000以上の敵を倒せ（以上1）</p>
    <button onclick="completeQuest('S')">完了</button>
    <button onclick="goHome()">ホームに戻る</button>
</div>

<script>
// 初期データ
let coinCount = 10; // プレイヤーの初期コイン
let playerLevel = 5; // プレイヤーの初期レベル
let fightCount = 0; // 戦闘回数
let selectedEnemyLevel = 0;

// クエスト定義
const quests = {
    C: { completed: false, reward: 50, condition: { fightCount: 1, coin: 5, level: 10 } },
    B: { completed: false, reward: 100, condition: { fightCount: 1, level: 100 } },
    A: { completed: false, reward: 500, condition: { fightCount: 1, level: 1000 } },
    S: { completed: false, reward: 1000, condition: { fightCount: 1, level: 5000 } }
};

// ホーム画面に戻る
function goHome() {
    hideAllScreens();
    document.getElementById('home-screen').style.display = 'block';
    updateCoinDisplay();
    updateLevelDisplay();
}

// 戦闘画面に移動
function goToFightScreen() {
    hideAllScreens();
    document.getElementById('fight-screen').style.display = 'block';
}

// ショップ画面に移動
function goToShopScreen() {
    hideAllScreens();
    document.getElementById('shop-screen').style.display = 'block';
}

// クエスト画面に移動
function goToQuestScreen() {
    hideAllScreens();
    document.getElementById('quest-screen').style.display = 'block';
}

// すべての画面を非表示にする
function hideAllScreens() {
    document.getElementById('home-screen').style.display = 'none';
    document.getElementById('fight-screen').style.display = 'none';
    document.getElementById('shop-screen').style.display = 'none';
    document.getElementById('quest-screen').style.display = 'none';
}

// 敵のレベルを選ぶ
function selectEnemy(level) {
    selectedEnemyLevel = level;
}

// 戦闘処理
function fight() {
    if (selectedEnemyLevel) {
        let message;
        const success = Math.random() < 0.5; // 50%の確率で勝敗
        if (success) {
            message = `敵（レベル ${selectedEnemyLevel}）を倒しました！`;
            coinCount += 5; // 勝利で5コイン獲得
            fightCount++;
            updateCoinDisplay(); // コイン表示を更新
            checkQuestCompletion();
        } else {
            message = `敵（レベル ${selectedEnemyLevel}）に負けました！`;
            handleGameOver();
        }
        document.getElementById('message').innerHTML = message;
    }
}

// ショップ処理
document.querySelectorAll('.shop-choice').forEach(button => {
    button.addEventListener('click', function() {
        const cost = parseInt(this.id.split('-').pop(), 10);
        const levelIncrease = parseInt(this.id.split('-')[2], 10);

        if (coinCount >= cost) {
            coinCount -= cost;
            playerLevel += levelIncrease;
            updateCoinDisplay();
            updateLevelDisplay();
            document.getElementById('shop-message').textContent = `レベルが${levelIncrease}上がりました！`;
        } else {
            document.getElementById('shop-message').textContent = 'コインが足りません！';
        }
    });
});

// クエスト完了処理
function completeQuest(questKey) {
    const quest = quests[questKey];
    if (!quest.completed) {
        if (checkQuestCondition(questKey)) {
            quest.completed = true;
            coinCount += quest.reward;
            updateCoinDisplay();
            alert(`${questKey}クエストをクリアしました！報酬: ${quest.reward}コイン`);
        } else {
            alert('クエストの条件が満たされていません。');
        }
    } else {
        alert(`${questKey}クエストは既に完了しています。`);
    }
}

// クエスト条件チェック
function checkQuestCondition(questKey) {
    const quest = quests[questKey];
    if (questKey === 'C' && fightCount >= 1 && playerLevel >= 10) {
        return true;
    } else if (questKey === 'B' && fightCount >= 1 && playerLevel >= 100) {
        return true;
    } else if (questKey === 'A' && fightCount >= 1 && playerLevel >= 1000) {
        return true;
    } else if (questKey === 'S' && fightCount >= 1 && playerLevel >= 5000) {
        return true;
    }
    return false;
}

// ゲームオーバー処理
function handleGameOver() {
    alert("ゲームオーバー！");
    goHome();
}

// コイン表示更新
function updateCoinDisplay() {
    document.getElementById('coin-count').textContent = coinCount;
}

// レベル表示更新
function updateLevelDisplay() {
    document.getElementById('player-number').textContent = playerLevel;
}
</script>

</body>
</html>
